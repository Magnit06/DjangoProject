# Данный проект специально содержит данные, которые не должны быть в контроле версий, это сделано для того, чтобы желающий мог все у себя развернуть и пользоваться.

#### Добавить в `/etc/hosts` строку `127.0.0.1 postgresdb` и `127.0.0.1 elasticsearch`

## Сборка и запуск докер-контейнеров

Из папки **samplesite** выполнить:

### Перед тем как начать работу с докером, в системе необходимо выполнить следующую команду в корне проекта

`chmod +x ./entrypoint.sh`.

1. `docker-compose build`
2. `docker-compose up` (будете видеть логи) или `docker-compose up -d` (демонический процесс) - не будете видеть логи
3. В ещё одной консоли из корня проекта выполняем команду `celery -A samplesite worker -l INFO`
4. В ещё одной консоли выполняем запуск процесса генерации тестовых данных командой 
   `python manage.py generate_db -n <количество генерируемых данных>` (процесс долгий, можно попить чай), где -n можно 
   и не указывать, по умолчанию будет 1000. Флаг означает количество 
   генерируемых данных, то есть n пользователей, у пользователей n объявлений, у объявлений n комментариев
5. Для простоты у всех пользователей login = password. 

## Ссылка для входа в Админ-панель
`http://127.0.0.1:8000/admin/`
1. login -> `admin`.
2. password -> `admin`.

## Для возможности запуска unittestов в проекте
1. заходим в оболочку postgressql `docker exec -it postgressql bash`;
2. Подключаемся к БД `psql -U postgres`;
3. выполняем команду `ALTER USER djangouser CREATEDB;`.
Profit!

